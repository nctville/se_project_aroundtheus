!function(){"use strict";var e=class{constructor(e,t){this._formEl=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.remove(this._errorClass)}_enableBtn(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}toggleButtonState(){this._hasInvalidInput()?this.disableBtn(this._submitBtn):this._enableBtn(this._submitBtn)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitBtn=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},t=class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteIcon(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardTitle=this._cardElement.querySelector(".card__location"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}},s=class{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&(this.close(),e.preventDefault())}_setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close(),e.target.classList.contains("modal__close")&&this.close()}))}},n=class extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super._setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){this._popupForm.reset(),super.close()}};const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=document.querySelector("#profile-edit-modal").querySelector(".modal__form"),r=document.querySelector("#add-card-modal").querySelector(".modal__form"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__edit-button"),c=document.querySelector(".modal__input_type_name"),d=document.querySelector(".modal__input_type_description"),u=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._image=this._popupElement.querySelector(".modal__preview"),this._caption=this._popupElement.querySelector(".modal__caption")}open(e){let{link:t,name:s}=e;this._image.src=t,this._image.alt=s,this._caption.textContent=s,super.open()}}({popupSelector:"#modal__preview-image"});u._setEventListeners();const _=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite Valley"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake Louise"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald Mountains"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"Vanoise National Park"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"Lago di Braies"}],renderer:function(e){return new t(e,"#card-template",((e,t)=>{u.open({link:t,name:e})})).getView()}},".cards__list");_.renderItems();const m=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._name=document.querySelector(t),this._job=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._job.textContent=s}}({nameSelector:".profile__name",jobSelector:".profile__description"}),p=new n({popupSelector:"#profile-edit-modal",handleFormSubmit:function(e){m.setUserInfo(e)}});p.setEventListeners();const h=new n({popupSelector:"#add-card-modal",handleFormSubmit:function(e){let{title:t,url:s}=e;_.addItem({name:t,link:s})}});h.setEventListeners(),new e(o,i).enableValidation();const E=new e(o,r);E.enableValidation(),l.addEventListener("click",(()=>{const e=m.getUserInfo();c.value=e.name,d.value=e.job,p.open()})),a.addEventListener("click",(()=>{E.disableBtn(),h.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBNEZBLE1BNUZBLE1BQ0VBLFdBQUFBLENBQVlDLEVBQVFDLEdBQ2xCQyxLQUFLQyxRQUFVRixFQUVmQyxLQUFLRSxlQUFpQkosRUFBT0ssY0FDN0JILEtBQUtJLHNCQUF3Qk4sRUFBT08scUJBQ3BDTCxLQUFLTSxxQkFBdUJSLEVBQU9TLG9CQUNuQ1AsS0FBS1EsaUJBQW1CVixFQUFPVyxnQkFDL0JULEtBQUtVLFlBQWNaLEVBQU9hLFVBQzVCLENBRUFDLGVBQUFBLENBQWdCQyxHQUNkLE1BQU1DLEVBQWtCZCxLQUFLQyxRQUFRYyxjQUNsQyxJQUFHRixFQUFRRyxZQUVkSCxFQUFRSSxVQUFVQyxJQUFJbEIsS0FBS1Esa0JBQzNCTSxFQUFnQkssWUFBY04sRUFBUU8sa0JBQ3RDTixFQUFnQkcsVUFBVUMsSUFBSWxCLEtBQUtVLFlBQ3JDLENBRUFXLGVBQUFBLENBQWdCUixHQUNkLE1BQU1TLEVBQWlCdEIsS0FBS0MsUUFBUWMsY0FDakMsSUFBR0YsRUFBUUcsWUFFZEgsRUFBUUksVUFBVU0sT0FBT3ZCLEtBQUtRLGtCQUM5QmMsRUFBZUgsWUFBY04sRUFBUU8sa0JBQ3JDRSxFQUFlTCxVQUFVTSxPQUFPdkIsS0FBS1UsWUFDdkMsQ0FFQWMsVUFBQUEsR0FDRXhCLEtBQUt5QixXQUFXUixVQUFVTSxPQUFPdkIsS0FBS00sc0JBQ3RDTixLQUFLeUIsV0FBV0MsVUFBVyxDQUU3QixDQUVBQyxVQUFBQSxHQUNFM0IsS0FBS3lCLFdBQVdSLFVBQVVDLElBQUlsQixLQUFLTSxzQkFDbkNOLEtBQUt5QixXQUFXQyxVQUFXLENBQzdCLENBRUFFLGlCQUFBQSxHQUdNNUIsS0FBSzZCLG1CQUNQN0IsS0FBSzJCLFdBQVczQixLQUFLeUIsWUFFckJ6QixLQUFLd0IsV0FBV3hCLEtBQUt5QixXQUV6QixDQUVBSSxnQkFBQUEsR0FDRSxPQUFRN0IsS0FBSzhCLFVBQVVDLE9BQU9sQixHQUFZQSxFQUFRbUIsU0FBU0MsT0FDN0QsQ0FFQUMsbUJBQUFBLENBQW9CckIsR0FDYkEsRUFBUW1CLFNBQVNDLE1BR3BCakMsS0FBS3FCLGdCQUFnQlIsR0FGckJiLEtBQUtZLGdCQUFnQkMsRUFJekIsQ0FFQXNCLGtCQUFBQSxHQUVFbkMsS0FBSzhCLFVBQVksSUFBSTlCLEtBQUtDLFFBQVFtQyxpQkFBaUJwQyxLQUFLRSxpQkFDeERGLEtBQUt5QixXQUFhekIsS0FBS0MsUUFBUWMsY0FBY2YsS0FBS0ksdUJBRWxESixLQUFLOEIsVUFBVU8sU0FBU3hCLElBQ3RCQSxFQUFReUIsaUJBQWlCLFNBQVMsS0FDaEN0QyxLQUFLa0Msb0JBQW9CckIsR0FDekJiLEtBQUs0QixtQkFBbUIsR0FDeEIsR0FFTixDQUdBVyxnQkFBQUEsR0FDRXZDLEtBQUtDLFFBQVFxQyxpQkFBaUIsVUFBV0UsSUFDdkNBLEVBQUlDLGdCQUFnQixJQUd0QnpDLEtBQUttQyxvQkFDUCxHQ3BCRixFQTlEQSxNQUNFdEMsV0FBQUEsQ0FBWTZDLEVBQU1DLEVBQWNDLEdBQzlCNUMsS0FBSzZDLE1BQVFILEVBQUtJLEtBQ2xCOUMsS0FBSytDLE1BQVFMLEVBQUtNLEtBRWxCaEQsS0FBS2lELGNBQWdCTixFQUNyQjNDLEtBQUtrRCxrQkFBb0JOLENBQzNCLENBRUFULGtCQUFBQSxHQUNrQm5DLEtBQUttRCxhQUFhcEMsY0FBYyxzQkFDeEN1QixpQkFBaUIsU0FBUyxLQUNoQ3RDLEtBQUtvRCxpQkFBaUIsSUFHTnBELEtBQUttRCxhQUFhcEMsY0FBYyx3QkFDeEN1QixpQkFBaUIsU0FBUyxLQUNsQ3RDLEtBQUtxRCxtQkFBbUIsSUFHMUJyRCxLQUFLc0QsV0FBV2hCLGlCQUFpQixTQUFTLEtBQ3hDdEMsS0FBS2tELGtCQUFrQmxELEtBQUs2QyxNQUFPN0MsS0FBSytDLE1BQU0sR0FFbEQsQ0FVQUssZUFBQUEsR0FDRXBELEtBQUttRCxhQUNGcEMsY0FBYyxzQkFDZEUsVUFBVXNDLE9BQU8sMkJBQ3RCLENBRUFGLGlCQUFBQSxHQUNFckQsS0FBS21ELGFBQWE1QixTQUNsQnZCLEtBQUttRCxhQUFlLElBQ3RCLENBRUFLLE9BQUFBLEdBY0UsT0FiQXhELEtBQUttRCxhQUFlTSxTQUNqQjFDLGNBQWNmLEtBQUtpRCxlQUNuQlMsUUFBUTNDLGNBQWMsU0FDdEI0QyxXQUFVLEdBRWIzRCxLQUFLNEQsV0FBYTVELEtBQUttRCxhQUFhcEMsY0FBYyxtQkFDbERmLEtBQUtzRCxXQUFhdEQsS0FBS21ELGFBQWFwQyxjQUFjLGdCQUVsRGYsS0FBS3NELFdBQVdPLElBQU03RCxLQUFLK0MsTUFDM0IvQyxLQUFLc0QsV0FBV1EsSUFBTTlELEtBQUs2QyxNQUMzQjdDLEtBQUs0RCxXQUFXekMsWUFBY25CLEtBQUs2QyxNQUVuQzdDLEtBQUttQyxxQkFDRW5DLEtBQUttRCxZQUNkLEdDeEJGLEVBbkNBLE1BQ0V0RCxXQUFBQSxDQUFXa0UsR0FBb0IsSUFBbkIsY0FBRUMsR0FBZUQsRUFDM0IvRCxLQUFLaUUsY0FBZ0JSLFNBQVMxQyxjQUFjaUQsR0FDNUNoRSxLQUFLa0UsZ0JBQWtCbEUsS0FBS2tFLGdCQUFnQkMsS0FBS25FLEtBQ25ELENBRUFvRSxJQUFBQSxHQUNFcEUsS0FBS2lFLGNBQWNoRCxVQUFVQyxJQUFJLGdCQUNqQ3VDLFNBQVNuQixpQkFBaUIsVUFBV3RDLEtBQUtrRSxnQkFDNUMsQ0FFQUcsS0FBQUEsR0FDRXJFLEtBQUtpRSxjQUFjaEQsVUFBVU0sT0FBTyxnQkFDcENrQyxTQUFTYSxvQkFBb0IsVUFBV3RFLEtBQUtrRSxnQkFDL0MsQ0FFQUEsZUFBQUEsQ0FBZ0JLLEdBQ0EsV0FBVkEsRUFBRUMsTUFDSnhFLEtBQUtxRSxRQUNMRSxFQUFFOUIsaUJBRU4sQ0FFQU4sa0JBQUFBLEdBQ0VuQyxLQUFLaUUsY0FBYzNCLGlCQUFpQixhQUFjaUMsSUFDNUNBLEVBQUVFLE9BQU94RCxVQUFVeUQsU0FBUyxpQkFDOUIxRSxLQUFLcUUsUUFFSEUsRUFBRUUsT0FBT3hELFVBQVV5RCxTQUFTLGlCQUM5QjFFLEtBQUtxRSxPQUNQLEdBRUosR0NFRixFQWhDQSxjQUE0Qk0sRUFDMUI5RSxXQUFBQSxDQUFXa0UsR0FBc0MsSUFBckMsY0FBRUMsRUFBYSxpQkFBRVksR0FBa0JiLEVBQzdDYyxNQUFNLENBQUViLGtCQUVSaEUsS0FBSzhFLFdBQWE5RSxLQUFLaUUsY0FBY2xELGNBQWMsZ0JBQ25EZixLQUFLK0Usa0JBQW9CSCxDQUMzQixDQUVBSSxlQUFBQSxHQUNFLE1BQU1DLEVBQVlqRixLQUFLOEUsV0FBVzFDLGlCQUFpQixpQkFDN0M4QyxFQUFhLENBQUMsRUFJcEIsT0FIQUQsRUFBVTVDLFNBQVM4QyxJQUNqQkQsRUFBV0MsRUFBTXJDLE1BQVFxQyxFQUFNQyxLQUFLLElBRS9CRixDQUNULENBRUFHLGlCQUFBQSxHQUNFUixNQUFNMUMscUJBQ05uQyxLQUFLOEUsV0FBV3hDLGlCQUFpQixVQUFXaUMsSUFDMUNBLEVBQUU5QixpQkFDRnpDLEtBQUsrRSxrQkFBa0IvRSxLQUFLZ0YsbUJBQzVCaEYsS0FBS3FFLE9BQU8sR0FFaEIsQ0FFQUEsS0FBQUEsR0FDRXJFLEtBQUs4RSxXQUFXUSxRQUNoQlQsTUFBTVIsT0FDUixHQy9CSyxNQWlDUXZFLEVBQVMsQ0FDcEJ5RixhQUFjLGVBQ2RwRixjQUFlLGdCQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCQzVCVjZFLEVBRG1CL0IsU0FBUzFDLGNBQWMsdUJBQ1BBLGNBQWMsZ0JBRWpEMEUsRUFEZWhDLFNBQVMxQyxjQUFjLG1CQUNYQSxjQUFjLGdCQUd6QzJFLEVBQWFqQyxTQUFTMUMsY0FBYyx3QkFHcEM0RSxFQUFpQmxDLFNBQVMxQyxjQUFjLHlCQUl4QzZFLEVBQVluQyxTQUFTMUMsY0FBYywyQkFDbkM4RSxFQUFtQnBDLFNBQVMxQyxjQUNoQyxrQ0FLSStFLEVBQWUsSUM1QnJCLGNBQTZCbkIsRUFDMUI5RSxXQUFBQSxDQUFXa0UsR0FBa0IsSUFBakIsY0FBQ0MsR0FBY0QsRUFDekJjLE1BQU0sQ0FBQ2Isa0JBQ1BoRSxLQUFLK0YsT0FBUy9GLEtBQUtpRSxjQUFjbEQsY0FBYyxtQkFDL0NmLEtBQUtnRyxTQUFXaEcsS0FBS2lFLGNBQWNsRCxjQUFjLGtCQUVuRCxDQUVBcUQsSUFBQUEsQ0FBSTZCLEdBQWUsSUFBZCxLQUFDakQsRUFBSSxLQUFFRixHQUFLbUQsRUFDZmpHLEtBQUsrRixPQUFPbEMsSUFBTWIsRUFDbEJoRCxLQUFLK0YsT0FBT2pDLElBQU1oQixFQUNsQjlDLEtBQUtnRyxTQUFTN0UsWUFBYzJCLEVBQzVCK0IsTUFBTVQsTUFDUixHRGVxQyxDQUN0Q0osY0FBZSwwQkFJakI4QixFQUFhM0QscUJBUWIsTUFBTStELEVBQVUsSUUzQ2hCLE1BQ0VyRyxXQUFBQSxDQUFXa0UsRUFBc0JvQyxHQUFtQixJQUF4QyxNQUFFQyxFQUFLLFNBQUVDLEdBQVV0QyxFQUM3Qi9ELEtBQUtzRyxPQUFTRixFQUNkcEcsS0FBS3VHLFVBQVlGLEVBQ2pCckcsS0FBS3dHLFdBQWEvQyxTQUFTMUMsY0FBY29GLEVBQzNDLENBRUFNLFdBQUFBLEdBQ0V6RyxLQUFLc0csT0FBT2pFLFNBQVNLLElBQ25CMUMsS0FBSzBHLFFBQVFoRSxFQUFLLEdBRXRCLENBRUFnRSxPQUFBQSxDQUFRaEUsR0FDTixNQUFNaUUsRUFBVTNHLEtBQUt1RyxVQUFVN0QsR0FDL0IxQyxLQUFLd0csV0FBV0ksUUFBUUQsRUFDMUIsR0Y0QkEsQ0FBRVAsTUQ1Q3dCLENBQ3hCLENBQ0V0RCxLQUFNLGtCQUNORSxLQUFNLHFHQUNOYyxJQUFLLG1CQUVQLENBQ0VoQixLQUFNLGNBQ05FLEtBQU0sd0dBQ05jLElBQUssZUFFUCxDQUNFaEIsS0FBTSxpQkFDTkUsS0FBTSwyR0FDTmMsSUFBSyxrQkFFUCxDQUNFaEIsS0FBTSxVQUNORSxLQUFNLG9HQUNOYyxJQUFLLFdBRVAsQ0FDRWhCLEtBQU0sd0JBQ05FLEtBQU0sb0dBQ05jLElBQUsseUJBRVAsQ0FDRWhCLEtBQU0saUJBQ05FLEtBQU0saUdBQ05jLElBQUssbUJDZWN1QyxTQVJ6QixTQUFvQjNELEdBSWxCLE9BSGEsSUFBSW1FLEVBQUtuRSxFQUpILGtCQUl1QixDQUFDSSxFQUFNRSxLQUMvQzhDLEVBQWExQixLQUFLLENBQUVwQixPQUFNRixRQUFPLElBRXZCVSxTQUNkLEdBSUUsZ0JBRUYwQyxFQUFRTyxjQUVSLE1BQU1LLEVBQVcsSUdqRGpCLE1BQ0VqSCxXQUFBQSxDQUFXa0UsR0FBZ0MsSUFBL0IsYUFBRWdELEVBQVksWUFBRUMsR0FBYWpELEVBQ3ZDL0QsS0FBSzZDLE1BQVFZLFNBQVMxQyxjQUFjZ0csR0FDcEMvRyxLQUFLaUgsS0FBT3hELFNBQVMxQyxjQUFjaUcsRUFDckMsQ0FFQUUsV0FBQUEsR0FDRSxNQUFPLENBQ0xwRSxLQUFNOUMsS0FBSzZDLE1BQU0xQixZQUNqQmdHLElBQUtuSCxLQUFLaUgsS0FBSzlGLFlBRW5CLENBRUFpRyxXQUFBQSxDQUFXbkIsR0FBd0IsSUFBdkIsS0FBRW5ELEVBQUksWUFBRXVFLEdBQWFwQixFQUMvQmpHLEtBQUs2QyxNQUFNMUIsWUFBYzJCLEVBQ3pCOUMsS0FBS2lILEtBQUs5RixZQUFja0csQ0FDMUIsR0hpQzRCLENBQzVCTixhQUFjLGlCQUNkQyxZQUFhLDBCQUdUTSxFQUFnQixJQUFJQyxFQUFjLENBQ3RDdkQsY0FBZSxzQkFDZlksaUJBaUJGLFNBQWlDbEMsR0FDL0JvRSxFQUFTTSxZQUFZMUUsRUFDdkIsSUFqQkE0RSxFQUFjakMsb0JBRWQsTUFBTW1DLEVBQW1CLElBQUlELEVBQWMsQ0FDekN2RCxjQUFlLGtCQUNmWSxpQkFlRixTQUE0QmIsR0FBaUIsSUFBaEIsTUFBRTBELEVBQUssSUFBRUMsR0FBSzNELEVBQ3pDbUMsRUFBUVEsUUFBUSxDQUFFNUQsS0FBTTJFLEVBQU96RSxLQUFNMEUsR0FDdkMsSUFmQUYsRUFBaUJuQyxvQkFFUyxJQUFJc0MsRUFBYzdILEVBQVEwRixHQUNsQ2pELG1CQUNsQixNQUFNcUYsRUFBdUIsSUFBSUQsRUFBYzdILEVBQVEyRixHQUN2RG1DLEVBQXFCckYsbUJBY3JCb0QsRUFBZXJELGlCQUFpQixTQUFTLEtBRXZDLE1BQU11RixFQUFhZixFQUFTSSxjQUM1QnRCLEVBQVVSLE1BQVF5QyxFQUFXL0UsS0FDN0IrQyxFQUFpQlQsTUFBUXlDLEVBQVdWLElBRXBDRyxFQUFjbEQsTUFBTSxJQUd0QnNCLEVBQVdwRCxpQkFBaUIsU0FBUyxLQUNuQ3NGLEVBQXFCakcsYUFDckI2RixFQUFpQnBELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvcntcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWw7XG4gICBcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NlYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2VhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzZWFnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9lbmFibGVCdG4oKSB7XG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgXG4gIH1cblxuICBkaXNhYmxlQnRuKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgIFxuXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdG4odGhpcy5fc3VibWl0QnRuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnRuKHRoaXMuX3N1Ym1pdEJ0bik7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICBcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuXG59XG5cblxuXG5cblxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBsaWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICBsaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZGVsZXRlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgIH0pO1xuICB9XG4gIC8qXG4gIF9oYW5kbGVQcmV2aWV3UGljdHVyZSgpIHtcbiAgICB0aGlzLl9tb2RhbEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbW9kYWxJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XG4gIH1cbiAgKi9cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sb2NhdGlvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICAgICAgYWx0OiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICAgICAgYWx0OiBcIkxha2UgTG91aXNlXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgICBhbHQ6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gICAgICBhbHQ6IFwiTGF0ZW1hclwiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICAgICAgYWx0OiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gICAgICBhbHQ6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICB9LFxuICBdO1xuICAgXG4gIGV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLm1vZGFsX19mb3JtJyxcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbiAgfTtcblxuICBleHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvciA9IHtcbiAgICBlZGl0UG9wdXA6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICAgIGFkZENhcmRQb3B1cDogXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgICBpbWFnZVBvcHVwOiBcIiNtb2RhbF9fcHJldmlldy1pbWFnZVwiXG4gIH0gXG5cbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8vd3JhcHBlcnNcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG4vL2FkZCBjYXJkIHZhcmlhYmxlc1xuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuLy8gQnV0dG9ucyArIERPTSBub2Rlc1xuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuXG5cbi8vIEZvcm0gZGF0YVxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV9uYW1lXCIpO1xuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCJcbik7XG5cblxuLy9PYmplY3RzXG5jb25zdCBwcmV2aWV3SW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNtb2RhbF9fcHJldmlldy1pbWFnZVwiLFxufSk7XG5jb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5cbnByZXZpZXdJbWFnZS5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgY2FyZFNlbGVjdG9yLCAobmFtZSwgbGluaykgPT4ge1xuICAgIHByZXZpZXdJbWFnZS5vcGVuKHsgbGluaywgbmFtZSB9KTtcbiAgfSk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiBjcmVhdGVDYXJkIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IHBvcHVwRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbn0pO1xucG9wdXBFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiBoYW5kbGVBZGRDYXJkU3VibWl0LFxufSk7XG5wb3B1cEFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy9oYW5kbGUgZm9ybSBzdWJtaXRzXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoeyB0aXRsZSwgdXJsIH0pIHtcbiAgc2VjdGlvbi5hZGRJdGVtKHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9KTtcbn1cblxuLy9ldmVudCBsaXN0ZW5lcnNcblxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiBcbiAgY29uc3QgdXNlclZhbHVlcyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJWYWx1ZXMubmFtZTtcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJWYWx1ZXMuam9iO1xuXG4gIHBvcHVwRWRpdEZvcm0ub3BlbigpO1xufSk7XG5cbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ0bigpXG4gIHBvcHVwQWRkQ2FyZEZvcm0ub3BlbigpO1xufSk7XG5cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3J9KSB7XG4gICAgIHN1cGVyKHtwb3B1cFNlbGVjdG9yfSk7XG4gICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fcHJldmlldycpO1xuICAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2FwdGlvbicpO1xuICAgICAvL3RoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICB9XG4gXG4gICBvcGVuKHtsaW5rLCBuYW1lfSkge1xuICAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xuICAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgc3VwZXIub3BlbigpO1xuICAgfVxuXG4gfVxuXG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKGRhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShkYXRhKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGRhdGEpXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpOyBcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTsgXG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbzsiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJjb25maWciLCJmb3JtRWwiLCJ0aGlzIiwiX2Zvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NlYWdlRWwiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWwiLCJyZW1vdmUiLCJfZW5hYmxlQnRuIiwiX3N1Ym1pdEJ0biIsImRpc2FibGVkIiwiZGlzYWJsZUJ0biIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVscyIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVJY29uIiwiX2NhcmRJbWFnZSIsInRvZ2dsZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0TGlzdCIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZEJ0biIsInByb2ZpbGVFZGl0QnRuIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsInByZXZpZXdJbWFnZSIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiX3JlZjIiLCJzZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiQ2FyZCIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfam9iIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwicG9wdXBFZGl0Rm9ybSIsIlBvcHVwV2l0aEZvcm0iLCJwb3B1cEFkZENhcmRGb3JtIiwidGl0bGUiLCJ1cmwiLCJGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJ1c2VyVmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==